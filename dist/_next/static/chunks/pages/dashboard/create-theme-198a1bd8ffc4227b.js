(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[619],{2017:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(7963).A)("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]])},7422:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/create-theme",function(){return a(8044)}])},8044:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var r=a(7876),s=a(4232),o=a(9917),n=a(7963);let i=(0,n.A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var l=a(9060);let c=(0,n.A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),d=(0,n.A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var m=a(4491),h=a(3868),u=a(1810),x=a(48);a(485);let p="https://api.frontbacked.com",b=()=>{let[e,t]=(0,s.useState)("github"),[a,n]=(0,s.useState)([]),[b,f]=(0,s.useState)(0),y=(0,s.useRef)(null),{toast:g}=(0,u.dj)(),{user:j,isAuthenticating:N}=(0,x.Oc)(),{connect:w,isLoading:v,selectRepo:k,githubConnected:C,repos:A,nextPage:S,prevPage:_,page:T}=function(e,t){let[a,r]=(0,s.useState)(null),[o,n]=(0,s.useState)([]),[i,l]=(0,s.useState)(1),[c,d]=(0,s.useState)(!1),[m,h]=(0,s.useState)(null),[u,b]=(0,s.useState)(!1),[f,y]=(0,s.useState)(null);(0,s.useEffect)(()=>{},[e,void 0]);let g=(0,s.useCallback)(()=>{if(!e)return;let t=window.location.origin+window.location.pathname,a="https://github.com/login/oauth/authorize?client_id=".concat(x.cJ.clientId,"&redirect_uri=").concat(encodeURIComponent(t),"&scope=").concat(x.cJ.scope);window.location.href=a},[e]),j=(0,s.useCallback)(async t=>{if(e)try{d(!0);let a=await fetch("".concat(p,"/github/callback"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(await e.getIdToken())},body:JSON.stringify({code:t})});if(!a.ok)throw Error("Failed to exchange code for token");let s=await a.json();localStorage.setItem("githubAccessToken",s.access_token),r(s.access_token)}catch(e){h(e.message)}finally{d(!1)}},[e]),N=(0,s.useCallback)(async t=>{if(a&&e)try{d(!0),h(null);let r=await fetch("".concat(p,"/github/repos?page=").concat(t),{headers:{Authorization:"Bearer ".concat(await e.getIdToken()),"X-Github-Token":"".concat(a)}});if(!r.ok)throw Error("Failed to fetch repos (".concat(r.status,")"));let s=await r.json();n(s)}catch(e){h(e.message)}finally{d(!1)}},[a,e]),w=(0,s.useCallback)(async t=>{if(a&&e)try{d(!0);let r=await fetch("".concat(p,"/github/deploy"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(await e.getIdToken()),"X-Github-Token":"".concat(a)},body:JSON.stringify({repoOwner:t.owner.login,repoName:t.name})});if(!r.ok){let e=await r.json();throw Error(e.error||"Deployment failed")}alert("✅ Theme deployed from ".concat(t.full_name))}catch(e){alert("❌ ".concat(e.message))}finally{d(!1)}},[a,e]),v=(0,s.useCallback)(()=>l(e=>e+1),[]),k=(0,s.useCallback)(()=>l(e=>Math.max(1,e-1)),[]);return(0,s.useEffect)(()=>{if(!e)return;let t=new URLSearchParams(window.location.search).get("code");t?(b(!0),j(t).then(()=>{window.history.replaceState({},"",window.location.pathname)})):f&&(b(!0),r(f))},[j,e,f]),(0,s.useEffect)(()=>{a&&e&&N(i)},[i,a,e,N]),{token:a,repos:o,page:i,isLoading:c,error:m,githubConnected:u,connect:g,nextPage:v,prevPage:k,selectRepo:w}}(j),E=e=>{t(e)};return(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)(m.A,{}),(0,r.jsxs)("section",{className:"relative pt-24 pb-16 overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-hero"}),(0,r.jsx)("div",{className:"relative z-10 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"text-center mb-12",children:[(0,r.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-6 leading-tight",children:(0,r.jsx)("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Create a New Theme"})}),(0,r.jsx)("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Upload your theme files or connect your GitHub repository to share your creation with the community"})]})})]}),(0,r.jsx)("section",{className:"py-16",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"bg-card rounded-2xl shadow-elegant p-8",children:[(0,r.jsxs)("div",{className:"flex border-b border-border mb-8",children:[(0,r.jsxs)("button",{onClick:()=>E("upload"),className:"py-3 px-6 font-medium transition-colors duration-200 border-b-2 ".concat("upload"===e?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),children:[(0,r.jsx)(i,{className:"inline-block mr-2 h-4 w-4"}),"Upload Folder"]}),(0,r.jsxs)("button",{onClick:()=>E("github"),className:"py-3 px-6 font-medium transition-colors duration-200 border-b-2 ".concat("github"===e?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),children:[(0,r.jsx)(l.A,{className:"inline-block mr-2 h-4 w-4"}),"Connect GitHub"]})]}),"upload"===e&&(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"p-12 border-2 border-dashed border-border rounded-xl text-center cursor-pointer hover:border-primary/50 transition-colors duration-200 bg-surface",onDrop:e=>{e.preventDefault(),n(Array.from(e.dataTransfer.files))},onDragOver:e=>e.preventDefault(),onClick:()=>{var e;return null==(e=y.current)?void 0:e.click()},children:[(0,r.jsx)(i,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),(0,r.jsx)("p",{className:"text-lg font-medium text-foreground mb-2",children:"Drag & drop a folder here"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"or click to browse"})]}),(0,r.jsx)("input",{ref:y,type:"file",webkitdirectory:"",multiple:!0,className:"hidden",onChange:e=>{var t;n(Array.from(null!=(t=e.target.files)?t:[]))}}),a.length>0&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Selected Files:"}),(0,r.jsx)("div",{className:"bg-surface rounded-lg p-4 max-h-60 overflow-y-auto",children:a.map((e,t)=>(0,r.jsx)("div",{className:"text-sm text-muted-foreground py-1",children:e.webkitRelativePath||e.name},t))}),b>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"w-full bg-surface rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:"".concat(b,"%")}})}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Uploading... ",b,"%"]})]})]})]}),"github"===e&&(0,r.jsx)("div",{className:"space-y-8",children:C?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-foreground",children:"Your Repositories"}),v?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),(0,r.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Loading repositories..."})]}):(0,r.jsx)("div",{className:"grid gap-4",children:A.map((e,t)=>(0,r.jsx)("div",{className:"bg-surface rounded-lg p-6 border border-border hover:border-primary/30 transition-colors",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"font-semibold text-foreground text-lg mb-2",children:e.name}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm",children:e.description||"No description provided."})]}),(0,r.jsx)(o.$,{onClick:()=>k(e),disabled:v,className:"ml-4",children:"Select & Deploy"})]})},t))}),(0,r.jsxs)("div",{className:"flex justify-between items-center pt-6",children:[(0,r.jsxs)(o.$,{variant:"outline",onClick:_,disabled:1===T,children:[(0,r.jsx)(c,{className:"mr-2 h-4 w-4"}),"Previous"]}),(0,r.jsxs)("span",{className:"text-muted-foreground",children:["Page ",T]}),(0,r.jsxs)(o.$,{variant:"outline",onClick:S,children:["Next",(0,r.jsx)(d,{className:"ml-2 h-4 w-4"})]})]})]}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(l.A,{className:"mx-auto h-16 w-16 text-muted-foreground mb-6"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Connect your GitHub account"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-8 max-w-md mx-auto",children:"Import a theme directly from your GitHub repository to share with the community."}),N?(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),(0,r.jsx)("p",{className:"mt-2 text-muted-foreground",children:"Authenticating..."})]}):v?(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),(0,r.jsx)("p",{className:"mt-2 text-muted-foreground",children:"Loading..."})]}):(0,r.jsxs)(o.$,{size:"lg",onClick:w,className:"bg-[#24292e] hover:bg-[#1c2022] text-white",children:[(0,r.jsx)(l.A,{className:"mr-2 h-5 w-5"}),"Connect with GitHub"]})]})})]})})}),(0,r.jsx)(h.A,{})]})}},8628:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(7963).A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},8728:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(7963).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},9046:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(7963).A)("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]])},9060:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(7963).A)("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]])}},e=>{e.O(0,[390,230,924,636,593,792],()=>e(e.s=7422)),_N_E=e.O()}]);